<!-- Webflow Embed Code for Photo Galleries Template -->

<div id="gallery-wrapper" style="width:100%">
  <iframe
    id="lot43-gallery"
    style="width:100%;border:none;height:100vh;display:block"
  ></iframe>
</div>

<script>
  var slug = window.location.pathname.split("/").pop();
  var iframe = document.getElementById("lot43-gallery");
  var iframeSrc = "https://dustchambers.github.io/beltline-app-gallery/gallery.html?id=" + slug;
  if (new URLSearchParams(window.location.search).has("edit")) {
    iframeSrc += "&edit";
  }
  iframe.src = iframeSrc;

  var savedHeight = "";
  var savedScrollY = 0;
  var lightboxIsOpen = false;

  window.addEventListener("message", function(e) {
    if (e.data && e.data.type === "resize") {
      iframe.style.height = e.data.height + "px";
    }
    if (e.data && e.data.type === "lightboxOpen" && !lightboxIsOpen) {
      lightboxIsOpen = true;
      savedHeight = iframe.style.height;
      savedScrollY = window.scrollY;
      var wrapper = document.getElementById("gallery-wrapper");
      wrapper.style.height = savedHeight;
      iframe.style.cssText = "position:fixed;top:0;left:0;width:100%;height:100vh;border:none;display:block;z-index:999999";
    }
    if (e.data && e.data.type === "lightboxClose" && lightboxIsOpen) {
      lightboxIsOpen = false;
      iframe.style.cssText = "width:100%;border:none;height:" + savedHeight + ";display:block";
      var wrapper = document.getElementById("gallery-wrapper");
      wrapper.style.height = "";
      window.scrollTo(0, savedScrollY);
    }
  });
</script>
