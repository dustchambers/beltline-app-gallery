<!-- Webflow Embed Code for Photo Galleries Template -->

<div id="gallery-wrapper" style="width:100%">
  <iframe
    id="lot43-gallery"
    style="width:100%;border:none;height:100vh;display:block"
  ></iframe>
</div>

<script>
  var slug = window.location.pathname.split("/").pop();
  var iframe = document.getElementById("lot43-gallery");
  var iframeSrc = "https://dustchambers.github.io/beltline-app-gallery/gallery.html?id=" + slug;
  if (new URLSearchParams(window.location.search).has("edit")) {
    iframeSrc += "&edit";
  }
  iframe.src = iframeSrc;

  var savedHeight = "";
  var savedScrollY = 0;

  window.addEventListener("message", function(e) {
    if (e.data && e.data.type === "resize") {
      iframe.style.height = e.data.height + "px";
    }
    if (e.data && e.data.type === "lightboxOpen") {
      savedHeight = iframe.style.height;
      savedScrollY = window.scrollY;
      document.getElementById("gallery-wrapper").style.height = savedHeight;
      iframe.style.position = "fixed";
      iframe.style.top = "0";
      iframe.style.left = "0";
      iframe.style.width = "100%";
      iframe.style.height = "100vh";
      iframe.style.zIndex = "999999";
    }
    if (e.data && e.data.type === "lightboxClose") {
      iframe.style.position = "";
      iframe.style.top = "";
      iframe.style.left = "";
      iframe.style.width = "100%";
      iframe.style.height = savedHeight;
      iframe.style.zIndex = "";
      document.getElementById("gallery-wrapper").style.height = "";
      window.scrollTo(0, savedScrollY);
    }
  });
</script>
