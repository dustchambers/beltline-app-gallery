<!-- Webflow Embed Code for Photo Galleries Template -->
<!-- Replace the existing embed code with this updated version -->

<div id="gallery-wrapper" style="width:100%;min-height:600px">
  <iframe
    id="lot43-gallery"
    style="width:100%;border:none;min-height:800px"
    loading="lazy"
  ></iframe>
</div>

<script>
  // Set iframe source based on URL slug
  var slug = window.location.pathname.split("/").pop();
  document.getElementById("lot43-gallery").src =
    "https://dustchambers.github.io/beltline-app-gallery/gallery.html?id=" + slug;

  // Listen for iframe messages
  var lightboxOpen = false;
  window.addEventListener("message", function(e) {
    var iframe = document.getElementById("lot43-gallery");

    // Handle resize messages (but not when lightbox is open)
    if (e.data && e.data.type === "resize" && !lightboxOpen) {
      iframe.style.height = e.data.height + "px";
    }

    // Handle lightbox open - expand iframe to fill viewport
    if (e.data && e.data.type === "lightbox-open") {
      lightboxOpen = true;
      document.body.style.overflow = "hidden";
      
      // Expand iframe to full viewport for proper centering
      iframe.style.position = "fixed";
      iframe.style.top = "0";
      iframe.style.left = "0";
      iframe.style.width = "100%";
      iframe.style.height = window.innerHeight + "px";
      iframe.style.zIndex = "9999";
    }

    // Handle lightbox close - restore iframe
    if (e.data && e.data.type === "lightbox-close") {
      lightboxOpen = false;
      document.body.style.overflow = "";
      
      // Restore iframe to normal
      iframe.style.position = "";
      iframe.style.top = "";
      iframe.style.left = "";
      iframe.style.width = "100%";
      iframe.style.height = "";
      iframe.style.zIndex = "";
    }
  });
</script>
